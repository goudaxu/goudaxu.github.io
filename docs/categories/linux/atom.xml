<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
	<title>Gouda&#x27;s Blog - linux</title>
	<subtitle>A simple blog by Gouda</subtitle>
	<link href="https://goudax.gitee.io/categories/linux/atom.xml" rel="self" type="application/atom+xml"/>
  <link href="https://goudax.gitee.io"/>
	<generator uri="https://www.getzola.org/">Zola</generator>
	<updated>2021-12-26T00:00:00+00:00</updated>
	<id>https://goudax.gitee.io/categories/linux/atom.xml</id>
	<entry xml:lang="en">
		<title>ArchLinux网络配置</title>
		<published>2021-12-26T00:00:00+00:00</published>
		<updated>2021-12-26T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/archlinuxwang-luo-pei-zhi/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/archlinuxwang-luo-pei-zhi/</id>
		<content type="html">&lt;h3 id=&quot;archlinux-wang-luo-pei-zhi-fang-fa&quot;&gt;Archlinux 网络配置方法&lt;&#x2F;h3&gt;
&lt;p&gt;在 Archlinux 下最简单的网络配置方式是使用 &lt;code&gt;systemd-networkd&lt;&#x2F;code&gt; 服务，默认配置文件位于 &lt;code&gt;&#x2F;etc&#x2F;systemd&#x2F;network&lt;&#x2F;code&gt; 下&lt;&#x2F;p&gt;
&lt;p&gt;使用 &lt;code&gt;systemctl&lt;&#x2F;code&gt; 开启 &lt;code&gt;systemd-networkd&lt;&#x2F;code&gt; 服务&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;$&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; systemctl enable systemd-networkd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;pei-zhi-dhcp-dong-tai-ip-di-zhi&quot;&gt;配置 DHCP 动态 IP 地址&lt;&#x2F;h4&gt;
&lt;p&gt;编辑 &lt;code&gt;&#x2F;etc&#x2F;systemd&#x2F;network&#x2F;enp0s3.network&lt;&#x2F;code&gt; 网卡配置文件&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[Match]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Name=enp0s3&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[Network]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;DHCP=ipv4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;pei-zhi-static-jing-tai-ip-di-zhi&quot;&gt;配置 STATIC 静态 IP 地址&lt;&#x2F;h4&gt;
&lt;p&gt;编辑 &lt;code&gt;&#x2F;etc&#x2F;systemd&#x2F;network&#x2F;enp0s3.network&lt;&#x2F;code&gt; 网卡配置文件&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[Match]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Name=enp0s3&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[Network]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Address=192.168.1.100&#x2F;24&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Gateway=192.168.1.1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;DNS=8.8.8.8&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;DNS=8.8.4.4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;如果 enp0s3.network 中添加了 DNS 选项则需要同时启用 &lt;code&gt;systemd-resolved.service&lt;&#x2F;code&gt; 服务配合使用&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;$ systemctl enable systemd-resolved.service&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;zhong-qi-wang-luo-fu-wu-shi-pei-zhi-sheng-xiao&quot;&gt;重启网络服务，使配置生效&lt;&#x2F;h4&gt;
&lt;p&gt;修改网卡配置文件之后，需要重启 &lt;code&gt;systemd-networkd&lt;&#x2F;code&gt; 服务使配置生效&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;$ systemctl restart systemd-networkd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>linux下编译报错ld</title>
		<published>2021-12-26T00:00:00+00:00</published>
		<updated>2021-12-26T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/bian-yi-bao-cuo-ld/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/bian-yi-bao-cuo-ld/</id>
		<content type="html">&lt;p&gt;编译报错 canot find -lpng&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;&#x2F;usr&#x2F;bin&#x2F;ld:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; cannot find&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt; -lc&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;&#x2F;usr&#x2F;bin&#x2F;ld:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; cannot find&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt; -lltdl&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;&#x2F;usr&#x2F;bin&#x2F;ld:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; cannot find&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt; -lXtst&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;&#x2F;usr&#x2F;bin&#x2F;ld:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; cannot find&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt; -lpng&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;这个报错就是缺少库文件&lt;&#x2F;p&gt;
&lt;p&gt;例如&lt;code&gt;&#x2F;usr&#x2F;bin&#x2F;ld: cannot find -lpng&lt;&#x2F;code&gt;,则可以安装 &lt;code&gt;apt install libpng-dev&lt;&#x2F;code&gt;试试&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>非LVM无损扩展硬盘分区(不推荐)</title>
		<published>2021-12-26T00:00:00+00:00</published>
		<updated>2021-12-26T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/fei-lvmwu-sun-kuo-zhan-ying-pan-fen-qu/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/fei-lvmwu-sun-kuo-zhan-ying-pan-fen-qu/</id>
		<content type="html">&lt;p&gt;安装公司samba服务器时对磁盘需求量估计不足，原本分的只有100GB，使用一段时间后磁盘就达到了 86%的使用量，&lt;img src=&quot;http:&#x2F;&#x2F;b.bst.126.net&#x2F;common&#x2F;portrait&#x2F;face&#x2F;preview&#x2F;face15.gif&quot; alt=&quot;使用resize2fs调整ext4分区大小 - 明天的阳光 - 明天的阳光&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;我的情况  将一块硬盘分成了两个区，一个100GB 一个60GB  ，只使用了前100GB空间的内容，后面的分区没有挂载，也没有使用。属于比较好处理的情况&lt;&#x2F;p&gt;
&lt;p&gt;我的步骤：&lt;&#x2F;p&gt;
&lt;p&gt;1、umount 掉sdb磁盘    若提示磁盘忙的话请使用fuser  命令将正在使用磁盘的程序kill掉。 &lt;&#x2F;p&gt;
&lt;p&gt;fuser -k -x -u -c &#x2F;dev&#x2F;hd1 或者fuser -kxuc &#x2F;home&lt;&#x2F;p&gt;
&lt;p&gt;2、使用 fdisk  &#x2F;dev&#x2F;sdb 命令调整分区大小   进去后先使用p命令查看磁柱号 ，切记用笔记下来 ~~~ 别说我没有提醒你哦。。&lt;&#x2F;p&gt;
&lt;p&gt;3、删除掉这你需要变化的分区和需要借用的分区（意思就是准备变大的分区及准备变小的分区）然后再使用n命令建立分区，注意开始的磁柱号要和原来的一致，结束的磁柱号可以是你期望的磁柱号。。不知道的就输入你想要的磁盘大小即可 如+150GB&lt;&#x2F;p&gt;
&lt;p&gt;4、建立需要调整的分区（借用的）。&lt;&#x2F;p&gt;
&lt;p&gt;5、使用保存分区表。 &lt;&#x2F;p&gt;
&lt;p&gt;6、使用e2fsck  -f    &#x2F;dev&#x2F;sdb1     \ 需要调整的分区&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;[root@localhost 桌面]# e2fsck -f &#x2F;dev&#x2F;sdb1 e2fsck 1.41.12 (17-May-2010) 第一步: 检查inode,块,和大小 第二步: 检查目录结构 第3步: 检查目录连接性 Pass 4: Checking reference counts 第5步: 检查簇概要信息 &#x2F;dev&#x2F;sdb1: 5496&#x2F;6111232 files (1.8% non-contiguous), 18781569&#x2F;24416784 blocks&lt;&#x2F;p&gt;
&lt;p&gt;7、最后再使用 resize2fs &#x2F;dev&#x2F;sdb1 调整分区大小。&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;[root@BIGDATA 桌面]# resize2fs &#x2F;dev&#x2F;sdb1 resize2fs 1.41.12 (17-May-2010) Resizing the filesystem on &#x2F;dev&#x2F;sdb1 to 36622167 (4k) blocks. The filesystem on &#x2F;dev&#x2F;sdb1 is now 36622167 blocks long.&lt;&#x2F;p&gt;
&lt;p&gt;8、再mount一个磁盘分区，看看是不是变大了呢 。&lt;&#x2F;p&gt;
&lt;h2 id=&quot;yong-resize2fs-kuo-zhan-linuxfen-qu-da-xiao&quot;&gt;用resize2fs 扩展linux分区大小&lt;&#x2F;h2&gt;
&lt;p&gt;(2014-07-15 09:31:25)&lt;&#x2F;p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;标签：&lt;&#x2F;th&gt;&lt;th&gt;分类： &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;blog.sina.com.cn&#x2F;s&#x2F;articlelist_2099389457_6_1.html&quot;&gt;linux&lt;&#x2F;a&gt;&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;&#x2F;td&gt;&lt;td&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
&lt;p&gt;最近发现备份服务器的分区空间开始告警，需要扩充磁盘空间， 在存储中把卷扩大后， linux 系统中还不能马上识别， 因为没有用linux 的LVM 来管理磁盘， 所以只好用 fdisk 来扩充分区了。&lt;&#x2F;p&gt;
&lt;p&gt;用fdisk 先删除原有分区， 再重建分区， 起始cylinder 绝对不可以改，这样会破坏原分区的数据。&lt;&#x2F;p&gt;
&lt;p&gt;分区建好后， 就可以用e2fsck 先检查一下分区， 再用resize2fs 扩大就可以了。&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# fdisk &#x2F;dev&#x2F;sdb&lt;&#x2F;p&gt;
&lt;p&gt;WARNING: DOS-compatible mode is deprecated. It&#x27;s strongly recommended to&lt;&#x2F;p&gt;
&lt;p&gt;​        switch off the mode (command &#x27;c&#x27;) and change display units to&lt;&#x2F;p&gt;
&lt;p&gt;​        sectors (command &#x27;u&#x27;).&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): p&lt;&#x2F;p&gt;
&lt;p&gt;Disk &#x2F;dev&#x2F;sdb: 322.1 GB, 322122547200 bytes&lt;&#x2F;p&gt;
&lt;p&gt;255 heads, 63 sectors&#x2F;track, 39162 cylinders&lt;&#x2F;p&gt;
&lt;p&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;&#x2F;p&gt;
&lt;p&gt;Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes&lt;&#x2F;p&gt;
&lt;p&gt;I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes&lt;&#x2F;p&gt;
&lt;p&gt;Disk identifier: 0x76148198&lt;&#x2F;p&gt;
&lt;p&gt;Device Boot      Start        End     Blocks   Id  System&lt;&#x2F;p&gt;
&lt;p&gt;&#x2F;dev&#x2F;sdb1             1      26108  209712478+  83  Linux&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): m&lt;&#x2F;p&gt;
&lt;p&gt;Command action&lt;&#x2F;p&gt;
&lt;p&gt;a  toggle a bootable flag&lt;&#x2F;p&gt;
&lt;p&gt;b   edit bsd disklabel&lt;&#x2F;p&gt;
&lt;p&gt;c  toggle the dos compatibility flag&lt;&#x2F;p&gt;
&lt;p&gt;d  delete a partition&lt;&#x2F;p&gt;
&lt;p&gt;l   list known partition types&lt;&#x2F;p&gt;
&lt;p&gt;m  print this menu&lt;&#x2F;p&gt;
&lt;p&gt;n   add a new partition&lt;&#x2F;p&gt;
&lt;p&gt;o  create a new empty DOS partition table&lt;&#x2F;p&gt;
&lt;p&gt;p  print the partition table&lt;&#x2F;p&gt;
&lt;p&gt;q   quit without saving changes&lt;&#x2F;p&gt;
&lt;p&gt;s  create a new empty Sun disklabel&lt;&#x2F;p&gt;
&lt;p&gt;t  change a partition&#x27;s system id&lt;&#x2F;p&gt;
&lt;p&gt;u  change display&#x2F;entry units&lt;&#x2F;p&gt;
&lt;p&gt;v  verify the partition table&lt;&#x2F;p&gt;
&lt;p&gt;w  write table to disk and exit&lt;&#x2F;p&gt;
&lt;p&gt;x  extra functionality (experts only)&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): d&lt;&#x2F;p&gt;
&lt;p&gt;Selected partition 1&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): p&lt;&#x2F;p&gt;
&lt;p&gt;Disk &#x2F;dev&#x2F;sdb: 322.1 GB, 322122547200 bytes&lt;&#x2F;p&gt;
&lt;p&gt;255 heads, 63 sectors&#x2F;track, 39162 cylinders&lt;&#x2F;p&gt;
&lt;p&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;&#x2F;p&gt;
&lt;p&gt;Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes&lt;&#x2F;p&gt;
&lt;p&gt;I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes&lt;&#x2F;p&gt;
&lt;p&gt;Disk identifier: 0x76148198&lt;&#x2F;p&gt;
&lt;p&gt;Device Boot      Start        End     Blocks   Id  System&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): m&lt;&#x2F;p&gt;
&lt;p&gt;Command action&lt;&#x2F;p&gt;
&lt;p&gt;a  toggle a bootable flag&lt;&#x2F;p&gt;
&lt;p&gt;b   edit bsd disklabel&lt;&#x2F;p&gt;
&lt;p&gt;c  toggle the dos compatibility flag&lt;&#x2F;p&gt;
&lt;p&gt;d  delete a partition&lt;&#x2F;p&gt;
&lt;p&gt;l   list known partition types&lt;&#x2F;p&gt;
&lt;p&gt;m  print this menu&lt;&#x2F;p&gt;
&lt;p&gt;n   add a new partition&lt;&#x2F;p&gt;
&lt;p&gt;o  create a new empty DOS partition table&lt;&#x2F;p&gt;
&lt;p&gt;p  print the partition table&lt;&#x2F;p&gt;
&lt;p&gt;q   quit without saving changes&lt;&#x2F;p&gt;
&lt;p&gt;s  create a new empty Sun disklabel&lt;&#x2F;p&gt;
&lt;p&gt;t  change a partition&#x27;s system id&lt;&#x2F;p&gt;
&lt;p&gt;u  change display&#x2F;entry units&lt;&#x2F;p&gt;
&lt;p&gt;v  verify the partition table&lt;&#x2F;p&gt;
&lt;p&gt;w  write table to disk and exit&lt;&#x2F;p&gt;
&lt;p&gt;x  extra functionality (experts only)&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): n&lt;&#x2F;p&gt;
&lt;p&gt;Command action&lt;&#x2F;p&gt;
&lt;p&gt;e  extended&lt;&#x2F;p&gt;
&lt;p&gt;p  primary partition (1-4)&lt;&#x2F;p&gt;
&lt;p&gt;p&lt;&#x2F;p&gt;
&lt;p&gt;Partition number (1-4):&lt;&#x2F;p&gt;
&lt;p&gt;Value out of range.&lt;&#x2F;p&gt;
&lt;p&gt;Partition number (1-4): 1&lt;&#x2F;p&gt;
&lt;p&gt;First cylinder (1-39162, default 1):&lt;&#x2F;p&gt;
&lt;p&gt;Using default value 1&lt;&#x2F;p&gt;
&lt;p&gt;Last cylinder, +cylinders or +size{K,M,G} (1-39162, default 39162):&lt;&#x2F;p&gt;
&lt;p&gt;Using default value 39162&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): p&lt;&#x2F;p&gt;
&lt;p&gt;Disk &#x2F;dev&#x2F;sdb: 322.1 GB, 322122547200 bytes&lt;&#x2F;p&gt;
&lt;p&gt;255 heads, 63 sectors&#x2F;track, 39162 cylinders&lt;&#x2F;p&gt;
&lt;p&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;&#x2F;p&gt;
&lt;p&gt;Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes&lt;&#x2F;p&gt;
&lt;p&gt;I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes&lt;&#x2F;p&gt;
&lt;p&gt;Disk identifier: 0x76148198&lt;&#x2F;p&gt;
&lt;p&gt;Device Boot      Start        End     Blocks   Id  System&lt;&#x2F;p&gt;
&lt;p&gt;&#x2F;dev&#x2F;sdb1             1      39162  314568733+  83  Linux&lt;&#x2F;p&gt;
&lt;p&gt;Command (m for help): w&lt;&#x2F;p&gt;
&lt;p&gt;The partition table has been altered!&lt;&#x2F;p&gt;
&lt;p&gt;Calling ioctl() to re-read partition table.&lt;&#x2F;p&gt;
&lt;p&gt;Syncing disks.&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;#&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;#&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;#&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# resize2fs &#x2F;dev&#x2F;sdb1&lt;&#x2F;p&gt;
&lt;p&gt;resize2fs 1.41.11 (14-Mar-2010)&lt;&#x2F;p&gt;
&lt;p&gt;Please run &#x27;e2fsck -f &#x2F;dev&#x2F;sdb1&#x27; first.&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# e2fsck -f &#x2F;dev&#x2F;sdb1&lt;&#x2F;p&gt;
&lt;p&gt;e2fsck 1.41.11 (14-Mar-2010)&lt;&#x2F;p&gt;
&lt;p&gt;Pass 1: Checking inodes, blocks, and sizes&lt;&#x2F;p&gt;
&lt;p&gt;Pass 2: Checking directory structure&lt;&#x2F;p&gt;
&lt;p&gt;Pass 3: Checking directory connectivity&lt;&#x2F;p&gt;
&lt;p&gt;Pass 4: Checking reference counts&lt;&#x2F;p&gt;
&lt;p&gt;Pass 5: Checking group summary information&lt;&#x2F;p&gt;
&lt;p&gt;&#x2F;dev&#x2F;sdb1: 474754&#x2F;13107200 files (0.4% non-contiguous), 45135492&#x2F;52428119 blocks&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# resize2fs &#x2F;dev&#x2F;sdb1&lt;&#x2F;p&gt;
&lt;p&gt;resize2fs 1.41.11 (14-Mar-2010)&lt;&#x2F;p&gt;
&lt;p&gt;Resizing the filesystem on &#x2F;dev&#x2F;sdb1 to 78642183 (4k) blocks.&lt;&#x2F;p&gt;
&lt;p&gt;The filesystem on &#x2F;dev&#x2F;sdb1 is now 78642183 blocks long.&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# mount &#x2F;dev&#x2F;sdb1 &#x2F;lv_backup&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# ls -l &#x2F;lv_backup&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;lost+found&#x2F;   rsync_backup&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# ls -l &#x2F;lv_backup&#x2F;rsync_backup&#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;total 24&lt;&#x2F;p&gt;
&lt;p&gt;drwxr-xr-x  6 root   root 4096 2014-07-14 15:26 dmz&lt;&#x2F;p&gt;
&lt;p&gt;drwxr-xr-x 60 nobody root 4096 2014-07-15 04:00 forge-router&lt;&#x2F;p&gt;
&lt;p&gt;drwxr-xr-x  4 nobody root 4096 2014-06-17 11:21 sz01003&lt;&#x2F;p&gt;
&lt;p&gt;drwxr-xr-x  2 nobody root 4096 2014-07-14 15:17 sz01006&lt;&#x2F;p&gt;
&lt;p&gt;drwxr-xr-x  4 nobody root 4096 2014-06-17 22:00 sz01007&lt;&#x2F;p&gt;
&lt;p&gt;drwxr-xr-x  5 nobody root 4096 2014-06-17 12:54 sz01009&lt;&#x2F;p&gt;
&lt;p&gt;root@SHZ-VM-001:&#x2F;# df -h&lt;&#x2F;p&gt;
&lt;p&gt;Filesystem          Size  Used Avail Use% Mounted on&lt;&#x2F;p&gt;
&lt;p&gt;&#x2F;dev&#x2F;sda1            76G   15G   58G  21% &#x2F;&lt;&#x2F;p&gt;
&lt;p&gt;none               1001M  172K 1001M   1% &#x2F;dev&lt;&#x2F;p&gt;
&lt;p&gt;none               1005M    0 1005M   0% &#x2F;dev&#x2F;shm&lt;&#x2F;p&gt;
&lt;p&gt;none               1005M   60K 1005M   1% &#x2F;var&#x2F;run&lt;&#x2F;p&gt;
&lt;p&gt;none               1005M    0 1005M   0% &#x2F;var&#x2F;lock&lt;&#x2F;p&gt;
&lt;p&gt;none               1005M    0 1005M   0% &#x2F;lib&#x2F;init&#x2F;rw&lt;&#x2F;p&gt;
&lt;p&gt;&#x2F;dev&#x2F;sdb1           296G  170G  112G  61% &#x2F;lv_backup&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>ISCSI_CHAP认证</title>
		<published>2021-12-04T00:00:00+00:00</published>
		<updated>2021-12-04T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/iscsi-chapren-zheng/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/iscsi-chapren-zheng/</id>
		<content type="html">&lt;h1 id=&quot;deng-lu-chapren-zheng-de-iscsi-target&quot;&gt;登录CHAP认证的iSCSI target&lt;&#x2F;h1&gt;
&lt;p&gt;使用iStorage Server为linux服务器创建iSCSI target ，iStorage Server 支持CHAP在内的多种认证方法，而CHAP是目前IP SAN领域最常用的安全机制。&lt;&#x2F;p&gt;
&lt;p&gt;iStorage Server是kernsafe旗下的一款优秀的IP SAN服务器软件，创建target方法，可以查看官网白皮书：www.kernsafe.cn&lt;&#x2F;p&gt;
&lt;h4 id=&quot;di-yi-chong-quan-ju-pei-zhi-de-fang-fa-ke-hu-duan-shang-lian-jie-de-suo-you-targetke-neng-du-hui-shi-yong-zhe-ge-zhang-hao-he-mi-ma-jin-xing-ren-zheng-gua-yong-yu-zhi-you-yi-ge-target&quot;&gt;第一种：全局配置的方法，客户端上连接的所有target可能都会使用这个账号和密码进行认证，适用于只有一个target&lt;&#x2F;h4&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# yum -y install iscsi-initiator-utils&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# vi &#x2F;etc&#x2F;iscsi&#x2F;iscsid.conf&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# line 49: uncomment&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.authmethod = CHAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# line 53,54: uncomment and set username and password which set on iSCSI Target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.username = username&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.password = password&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# discover target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# iscsiadm -m discovery -t sendtargets -p 10.0.0.30&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Starting iscsid: Loading iSCSI transport class v2.0-870.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsi: registered transport (tcp)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsi: registered transport (iser)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;cxgb3i: tag itt 0x1fff, 13 bits, age 0xf, 4 bits.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsi: registered transport (cxgb3i)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;cnic: Broadcom NetXtreme II CNIC Driver cnic v2.1.2 (May 26, 2010)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Broadcom NetXtreme II iSCSI Driver bnx2i v2.1.1 (Mar 24, 2010)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsi: registered transport (bnx2i)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsi: registered transport (be2iscsi)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[ OK ]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;10.0.0.30:3260,1 iqn.2011-07.world.server:target0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# chkconfig iscsi on&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# chkconfig iscsid on&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# login to target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# iscsiadm -m node --login&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Logging in to [iface: default, target: iqn.2011-07.world.server:target0, portal: 10.0.0.30,3260]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;scsi2 : iSCSI Initiator over TCP&#x2F;IP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;scsi 2:0:0:0: RAID IET Controller 0001 PQ: 0 ANSI: 5&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;scsi 2:0:0:1: Direct-Access IET VIRTUAL-DISK 0001 PQ: 0 ANSI: 5&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;Login to [iface: default, target: iqn.2011-07.world.server:target0, portal: 10.0.0.30,3260] successful.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# confirm session&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# iscsiadm -m session -o show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;tcp: [1] 10.0.0.30:3260,1 iqn.2011-07.world.server:target0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# confirm partitions&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# cat &#x2F;proc&#x2F;partitions&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;major minor #blocks name&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;8031457280sda&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;81512000sda1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;8230944256sda2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;253020971520dm-0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;25316160384dm-1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;25323809280dm-2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;80104857600sdb&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;81104857600sdb1# added new device provided from target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# config for auto-mount when booting&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# vi &#x2F;etc&#x2F;fstab&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;&#x2F;dev&#x2F;mapper&#x2F;VolGroup-lv_root &#x2F; ext4 defaults 1 1&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;UUID=3d3f19a1-582f-4a29-a304-349750094b2c &#x2F;boot ext4 defaults 1 2&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;&#x2F;dev&#x2F;mapper&#x2F;VolGroup-lv_swap swap swap defaults 0 0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;tmpfs &#x2F;dev&#x2F;shm tmpfs defaults 0 0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;devpts &#x2F;dev&#x2F;pts devpts gid=5,mode=620 0 0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;sysfs &#x2F;sys sysfs defaults 0 0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;proc &#x2F;proc proc defaults 0 0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# add iSCSI filesystem&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;&#x2F;dev&#x2F;sdb1 &#x2F;var&#x2F;kvm ext4 _netdev 0 0&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@www ~]# chkconfig netfs on&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;________________________________________________________________________________________________&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;fang-fa-er-dui-te-ding-de-targetjin-xing-xiu-gai-jia-ru-wo-men-tong-shi-lian-jie-liao-duo-ge-target-bi-xu-zhe-yang&quot;&gt;方法二：对特定的target进行修改(假如我们同时连接了多个target，必须这样)&lt;&#x2F;h4&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;http:&#x2F;&#x2F;zlbzhu.blog.51cto.com&#x2F;1413424&#x2F;897422&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;发现target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm -m discovery -t sendtargets -p 192.168.1.211&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;挂载target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm -m node -T iqn_2013-06.com.safexjt:target00 -p 192.168.1.211 -l&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;配置该target,默认放在客户端&#x2F;var&#x2F;lib&#x2F;iscsi&#x2F;node下面&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;vi &#x2F;var&#x2F;lib&#x2F;iscsi&#x2F;nodes&#x2F;iqn_2013-06.com.safexjt\:target00&#x2F;192.168.1.211\,3260\,1&#x2F;default&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;在node.session.*.* 段添加如下信息&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.authmethod = CHAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.username = jack&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.password = jack&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;保存&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;#service iscsi restart&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;________________________________________________________________________________________________&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h4 id=&quot;fang-fa-san-ru-guo-wo-men-yi-jing-dui-targetjin-xing-liao-discovery-dan-shi-zai-gua-zai-de-shi-hou-ti-shi-ren-zheng-shi-bai-zhe-ge-shi-hou-wo-men-ye-ke-yi-tong-guo-iscsiadmming-ming-jin-xing-tian-jia-ren-zheng-xin-xi&quot;&gt;方法三：如果我们已经对target进行了discovery，但是在挂载的时候提示认证失败，这个时候我们也可以通过iscsiadm明明进行添加认证信息&lt;&#x2F;h4&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;root@iscsi &#x2F;]#iscsiadm -m node -T iqn_2013-06.com.safexjt:target00 -p 192.168.1.211:3260 -o update --name=node.session.auth.authmethod --value=CHAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@iscsi &#x2F;]#iscsiadm -m node -T iqn_2013-06.com.safexjt:target00 -p 192.168.1.211:3260 -o update --name= node.session.auth.username --value=xxxxxxx&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;[root@iscsi &#x2F;]#iscsiadm -m node -T iqn_2013-06.com.safexjt:target00 -p 192.168.1.211:3260 -o update --name= node.session.auth.password --value=xxxxxxx&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;需要注意的是，发现Target的命令（iscsiadm -m discovery -t sendtargets）会自动按照&#x2F;etc&#x2F;iscsi&#x2F;iscsi.conf文件中的参数配置刷新&#x2F;var&#x2F;lib&#x2F;iscsi&#x2F;nodes下initiator登录target要使用的参数文件，所以如果通过修改&#x2F;var&#x2F;lib&#x2F;iscsi&#x2F;nodes下的文件设置好CHAP认证后又对该存储服务器执行了发现target的操作，则需要再次修改该文件。&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;hr &#x2F;&gt;
&lt;hr &#x2F;&gt;
&lt;h3 id=&quot;yi-dan-xiang-ren-zheng&quot;&gt;一、单向认证&lt;&#x2F;h3&gt;
&lt;p&gt;单向认证是仅initiator连接target时进行认证。这个配置比较简单，打开&#x2F;etc&#x2F;iscsi&#x2F;iscsid.conf 文件，找到如下三项并取消注释：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.authmethod &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;CHAP   &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;&#x2F;&#x2F;开启CHAP认证&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.username &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; redhat    &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;&#x2F;&#x2F;配置账号&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.password &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; redhat123  &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;&#x2F;&#x2F;密码&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;通过以下命令重启服务并生效：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;etc&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;init.d&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsid restart&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;或&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;systemctl restart iscsid&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;上面的配置只是在开机自启动时会查找该配置中的信息，如果想要通过命令行测试用户名密码的有效性可以使用如下命令：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# 发现target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m discovery &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;t sendtargets &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150  &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;&#x2F;&#x2F;发现&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;T&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iqn&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;.2006&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;08.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;com.huawei&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;oceanstor&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;l   &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;&#x2F;&#x2F;登陆&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o delete &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;T&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iqn&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;.2006&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;08.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;com.huawei&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;oceanstor&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;&#x2F;&#x2F;删除session&lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# 使用用户名密码&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o update &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n node.session.auth.authmethod &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;v &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;CHAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o update &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n node.session.auth.username &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;v myusername&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o update &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;n node.session.auth.password &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;v mypassword&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# 也可以使用下面的格式&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;T&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iqn&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;.2006&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;08.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;com.huawei&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;oceanstor&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o update &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;name node.session.auth.authmethod &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;CHAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;T&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iqn&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;.2006&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;08.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;com.huawei&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;oceanstor&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;op update &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;name node.session.auth.username &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;myusername&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;T&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iqn&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;.2006&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;08.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;com.huawei&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;oceanstor&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;10.131.131.150 &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;op update &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;name node.session.auth.password &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;mypassword&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;连接后，可以使用如下命令查看连接状态：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# 查看状态&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# 查看连接后状态&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m session &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o show&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;上面的连接状态信息，也可以通过进入&#x2F;var&#x2F;lib&#x2F;iscsi&#x2F;ifaces&#x2F;目录通过查看文件进行查看。对于已经连接过的session，可以使用如下命令删除该session：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iqn in `iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;awk &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;&amp;#39;{print $NF}&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;`;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;do&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;T&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; $iqn &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;u;done&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iqn in `iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;|&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;awk &lt;&#x2F;span&gt;&lt;span style=&quot;color:#9acc76;&quot;&gt;&amp;#39;{print $NF}&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;`;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;do&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;o delete &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;T&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; $iqn;done&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;er-shuang-xiang-ren-zheng&quot;&gt;二、双向认证&lt;&#x2F;h3&gt;
&lt;p&gt;双向认证就是在Initiator端和target端都进行认证。Initiator 认证：在initiator尝试连接到一个target的时候，initator需要提供一个用户名和密码给target供target进行认证。下面我们称这个用户名密码为incoming账号，即：incoming账号是initiator端提供给target端，供target端认证的账号。target 认证：在initiator尝试连接到一个target的时候，target需要提供一个用户名和密码给initiator供initiator进行认证。与之对应的是outcoming账号，即：outcoming账号是target端提供给initiator端，供initiator认证的账号。双向认证的配置如下：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# &lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;To&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; set a &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;CHAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; username and password &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; initiator&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# authentication by the &lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;(s), uncomment the following lines&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.username &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; username&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.password &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; password&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# &lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;To&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; set a &lt;&#x2F;span&gt;&lt;span style=&quot;color:#db9d63;&quot;&gt;CHAP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; username and password &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cd74e8;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;target&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;(s)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# authentication by the initiator, uncomment the following lines&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;:&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.username_in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; username_in&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;node.session.auth.password_in &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; password_in&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;san-you-guan-duo-lu-jing-ju-he&quot;&gt;三、有关多路径聚合&lt;&#x2F;h3&gt;
&lt;p&gt;存储端一般会有多控，也就是可以由多个对应的IP可供discovery 和 login使用，比如一个两控的就会使用如下的方式进行挂载：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;存储系统A控iSCSI主机端口的IP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;A&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;l# iscsiadm &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;m node &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;存储系统B控iSCSI主机端口的IP&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;-&lt;&#x2F;span&gt;&lt;span style=&quot;color:#f0c678;&quot;&gt;B&lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;&amp;gt; -&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;l&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;接下来可以使用多路径软件进行聚合，这里以multipath为例，使用如下指令生成配置文件并重启服务生效。&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bsh&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bsh &quot;&gt;&lt;code class=&quot;language-bsh&quot; data-lang=&quot;bsh&quot;&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;# mpathconf &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;enable# mpathconf &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;with_module y# mpathconf &lt;&#x2F;span&gt;&lt;span style=&quot;color:#adb7c9;&quot;&gt;--&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;with_multipathd y&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>linux下验证启动模式是BIOS还是UEFI</title>
		<published>2021-12-04T00:00:00+00:00</published>
		<updated>2021-12-04T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/linuxxia-yan-zheng-qi-dong-mo-shi-biosoruefi/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/linuxxia-yan-zheng-qi-dong-mo-shi-biosoruefi/</id>
		<content type="html">&lt;p&gt;验证启动模式
如果以在 UEFI 主板上启用 UEFI 模式，Archiso 将会使用 systemd-boot 来 启动 Arch Linux。可以列出 efivars 目录以验证启动模式：&lt;&#x2F;p&gt;
&lt;h1 id=&quot;ls-sys-firmware-efi-efivars&quot;&gt;ls &#x2F;sys&#x2F;firmware&#x2F;efi&#x2F;efivars&lt;&#x2F;h1&gt;
&lt;p&gt;如果目录不存在，系统可能以 BIOS 或 CSM 模式启动，详见您的主板手册。&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>MACOS临时禁用IPv6</title>
		<published>2021-12-04T00:00:00+00:00</published>
		<updated>2021-12-04T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/mac-osjin-yong-lin-shi-ipv6/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/mac-osjin-yong-lin-shi-ipv6/</id>
		<content type="html">&lt;h1 id=&quot;mac-os-jin-yong-lin-shi-ipv6&quot;&gt;MAC OS 禁用临时ipv6&lt;&#x2F;h1&gt;
&lt;p&gt;Macos 可以通过对 sysctl.conf 进行修改从而达到禁用 IPv6 临时地址的问题，具体操作方法如下：&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; sysctl&lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt; -w&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; net.inet6.ip6.use_tempaddr=0 &lt;&#x2F;span&gt;&lt;span style=&quot;font-style:italic;color:#5f697a;&quot;&gt;#但是重启后会失效
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;如果想重启不失效手动编辑或创建 &lt;code&gt;&#x2F;etc&#x2F;sysctl.conf&lt;&#x2F;code&gt;文件并添加下列内容&lt;&#x2F;p&gt;
&lt;p&gt;&lt;code&gt;sysctl -w net.inet6.ip6.use_tempaddr = 0&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;由于 conf 文件的规则，最后一行需要是空行，多个换行符即多敲一个回车&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>shell中!感叹号的妙用</title>
		<published>2021-12-04T00:00:00+00:00</published>
		<updated>2021-12-04T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/shellzhong-gan-tan-hao-de-miao-yong/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/shellzhong-gan-tan-hao-de-miao-yong/</id>
		<content type="html">&lt;p&gt;整天在shell环境下操作，不积累点快捷输入的小技巧是不行的。&lt;&#x2F;p&gt;
&lt;p&gt;最常用的技巧恐怕就是Tab自动补全以及上方向键来回退上几条历史命令了，这些对于csh，bash，ksh，zsh都适用。&lt;&#x2F;p&gt;
&lt;p&gt;! 符号在 Linux 中不但可以用作否定符号，还可以用来从历史命令记录中取出命令或不加修改的执行之前运行的命令。下面的所有命令都已经在 Bash Shell 中经过确切地检验。尽管我没有试过，但大多都不能在别的 Shell 中运行。这里我们介绍下 Linux 命令行中符号 ! 那惊人和奇妙的用法。&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;执行上一条命令&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;例如，在执行完上面一条命令后，可以使用下面的方式再次执行上一条命令：&lt;&#x2F;p&gt;
&lt;p&gt;$ whereis bash #执行命令&lt;&#x2F;p&gt;
&lt;p&gt;bash: &#x2F;bin&#x2F;bash &#x2F;etc&#x2F;bash.bashrc&lt;&#x2F;p&gt;
&lt;p&gt;$ !! #再次执行上一条命令&lt;&#x2F;p&gt;
&lt;p&gt;whereis bash&lt;&#x2F;p&gt;
&lt;p&gt;bash: &#x2F;bin&#x2F;bash &#x2F;etc&#x2F;bash.bashrc&lt;&#x2F;p&gt;
&lt;p&gt;!!代表了上一条执行的命令。可以看到，当输入两个感叹号时，它显示上条命令的同时会执行上一条命令。当然了，通常我们还会想到使用“UP”键来完成这个事情。但是如果是基于上条命令扩充，!!就来得更加方便了。&lt;&#x2F;p&gt;
&lt;p&gt;比如，你想查看某个文件，但是忘了输入more：&lt;&#x2F;p&gt;
&lt;p&gt;$ &#x2F;opt&#x2F;user&#x2F;test.txt #忘记输入more&lt;&#x2F;p&gt;
&lt;p&gt;$ more !! #这样是不是快多了？&lt;&#x2F;p&gt;
&lt;p&gt;使用!!是不是方便多了？&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;使用上个命令第一个或最后一个的参数执行命令&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;使用上条命令最后一个参数&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;比如，你在使用ls列出目录内容时，没有带任何参数，但是想再次执行，带上-al参数，又不想输入长长的参数，可以使用下面的方式：&lt;&#x2F;p&gt;
&lt;p&gt;$ ls &#x2F;etc&#x2F;udev&lt;&#x2F;p&gt;
&lt;p&gt;&#x2F;etc&#x2F;udev&lt;&#x2F;p&gt;
&lt;p&gt;$ ls -al !$&lt;&#x2F;p&gt;
&lt;p&gt;ls -al &#x2F;etc&#x2F;udev&lt;&#x2F;p&gt;
&lt;p&gt;-r--r--r-- 1 root root 0 Jan 20 09:30 &#x2F;etc&#x2F;udev&lt;&#x2F;p&gt;
&lt;p&gt;这里的!$代表了上一条命令的最后一个参数。&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;使用上条命令第一个参数&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;而使用上条命令的第一个参数只需要使用!^，例如：&lt;&#x2F;p&gt;
&lt;p&gt;$ ls -al !^&lt;&#x2F;p&gt;
&lt;p&gt;去掉最后一个参数执行上一个命令&lt;&#x2F;p&gt;
&lt;p&gt;如果想执行上条命令，但不想带上最后一个参数：&lt;&#x2F;p&gt;
&lt;p&gt;$ ls -al dir #假设dir是一个很长的字符串&lt;&#x2F;p&gt;
&lt;p&gt;$ !:-&lt;&#x2F;p&gt;
&lt;p&gt;ls -al&lt;&#x2F;p&gt;
&lt;p&gt;什么场景下可能会用呢？比如你上一条命令最后一个参数是一个长长的字符串，而你恰好不想不用它，并且退格键删除又慢的时候，可以使用上面的方法。&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;使用上条命令的所有参数&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;前面说了使用上条命令的最后一个参数，那如果不是最后一个参数，该如何使用呢？很简单，使用!*即可。例如我们在输入find命令输错了，想要纠正的时候：&lt;&#x2F;p&gt;
&lt;p&gt;$ finsd -name &amp;quot;foo.zip&amp;quot; # 这里特意输错了find命令&lt;&#x2F;p&gt;
&lt;p&gt;$ find !*&lt;&#x2F;p&gt;
&lt;p&gt;find .&#x2F; -name &amp;quot;foo.zip&amp;quot;&lt;&#x2F;p&gt;
&lt;p&gt;.&#x2F;bar&#x2F;foo.zip&lt;&#x2F;p&gt;
&lt;p&gt;.&#x2F;data&#x2F;py&#x2F;foo.zip&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;使用上条命令指定的参数&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;有的读者可能会问了，如果我只想用其中某个参数呢？按照![命令名]:[参数号]的规则即可。例如：&lt;&#x2F;p&gt;
&lt;p&gt;$ cp -rf dira dirb&#x2F; #将dira拷贝到dirb&lt;&#x2F;p&gt;
&lt;p&gt;$ ls -l !cp:2 #查看dira的内容&lt;&#x2F;p&gt;
&lt;p&gt;ls -l dira&lt;&#x2F;p&gt;
&lt;p&gt;total 0&lt;&#x2F;p&gt;
&lt;p&gt;-rw-rw-r-- 1 hyb hyb 0 Jan 20 16:18 barfile&lt;&#x2F;p&gt;
&lt;p&gt;当上条命令的参数很长，而你需要取用中间的某个参数时，效果就比较明显了。&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;执行上一条以关键字开头的命令&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;例如，执行上一条find命令：&lt;&#x2F;p&gt;
&lt;p&gt;$ !find #执行上条以find开头的命令&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;逻辑非的作用&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;这个是它最为人所熟悉的作用，例如删除除了cfg结尾以外的所有文件：&lt;&#x2F;p&gt;
&lt;p&gt;rm !(*.cfg)&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;小结&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;惊叹号的其他惊叹功能一览：&lt;&#x2F;p&gt;
&lt;p&gt;!!&lt;&#x2F;p&gt;
&lt;p&gt;上一条命令&lt;&#x2F;p&gt;
&lt;p&gt;!$&lt;&#x2F;p&gt;
&lt;p&gt;上一条命令中的最后一个参数&lt;&#x2F;p&gt;
&lt;p&gt;!:-&lt;&#x2F;p&gt;
&lt;p&gt;上一命令除了最后一个参数&lt;&#x2F;p&gt;
&lt;p&gt;!*&lt;&#x2F;p&gt;
&lt;p&gt;上一条命令中的所有参数&lt;&#x2F;p&gt;
&lt;p&gt;!str&lt;&#x2F;p&gt;
&lt;p&gt;最近一条以str开头的命令&lt;&#x2F;p&gt;
&lt;p&gt;!?str?&lt;&#x2F;p&gt;
&lt;p&gt;最近一条包含str的命令&lt;&#x2F;p&gt;
&lt;p&gt;!n&lt;&#x2F;p&gt;
&lt;p&gt;顺数第n条命令&lt;&#x2F;p&gt;
&lt;p&gt;!-n&lt;&#x2F;p&gt;
&lt;p&gt;倒数第n条命令&lt;&#x2F;p&gt;
&lt;p&gt;^old^new&lt;&#x2F;p&gt;
&lt;p&gt;将上一命令中的old替换为new&lt;&#x2F;p&gt;
&lt;p&gt;!!:gs&#x2F;old&#x2F;new&lt;&#x2F;p&gt;
&lt;p&gt;将上一命令中的old替换为new&lt;&#x2F;p&gt;
&lt;p&gt;!scp:gs&#x2F;old&#x2F;new&lt;&#x2F;p&gt;
&lt;p&gt;将上一scp命令中的old替换为new&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;逻辑非的作用&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;这个是它最为人所熟悉的作用，例如删除除了cfg结尾以外的所有文件：&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#2b303b;color:#6c7079;&quot;&gt;&lt;code&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;rm !(*.cfg)  #删除需谨慎&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Ubuntu添加程序到桌面</title>
		<published>2021-12-04T00:00:00+00:00</published>
		<updated>2021-12-04T00:00:00+00:00</updated>
		<link href="https://goudax.gitee.io/linux/ubuntutian-jia-cheng-xu-dao-zhuo-mian/" type="text/html"/>
		<id>https://goudax.gitee.io/linux/ubuntutian-jia-cheng-xu-dao-zhuo-mian/</id>
		<content type="html">&lt;pre data-lang=&quot;bash&quot; style=&quot;background-color:#2b303b;color:#6c7079;&quot; class=&quot;language-bash &quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#eb6772;&quot;&gt;sudo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt; apt-get install alacarte&lt;&#x2F;span&gt;&lt;span style=&quot;color:#abb2bf;&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;原理为在该文件夹下创建文件：&lt;code&gt;~&#x2F;.local&#x2F;share&#x2F;applications&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
</content>
	</entry>
</feed>
